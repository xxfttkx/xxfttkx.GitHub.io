---
title: "20250815"
description: 
date: 2025-08-15T09:38:10+08:00
comments: true
draft: false
tags: ["diary"]
---
0138睡到0854，今天看看[StarResonanceDamageCounter](https://github.com/dmlgzs/StarResonanceDamageCounter)的server代码，看看怎么抓游戏包怎么解析怎么处理的。

然后依旧沉迷星痕共鸣刷猪，如果服务器卡了会导致包来的迟了，之前的通过2s内没有玩家再次造成伤害来判断神奇生物死亡在这种情况下也不适用了，参考[问一下有没有其他字段的protbuf](https://github.com/dmlgzs/StarResonanceDamageCounter/issues/13)能知道有个字段`kill 似乎是 17`，看看能不能用了，人多挤爆线也要想想怎么处理。

要不然宽松一点判断无伤害10s或20s神奇动物死亡，挤不进去的线就再过个10s去下一个线，省得麻烦了。。但损失了效率，本来挤得进去的线也变得挤不进去了。先改换线逻辑吧，进不了就不断往下去试，现在这样可能一直挤一个线，挤到别人杀完猪出来我才进去。

发现[StarResonanceDamageCounter](https://github.com/dmlgzs/StarResonanceDamageCounter)的[packet.js](https://github.com/dmlgzs/StarResonanceDamageCounter/blob/master/algo/packet.js)有留`const isDead = syncDamageInfo.IsDead != null ? syncDamageInfo.IsDead : false;`的接口，虽然没被使用。

用了`isDead`发现并不好用，不是所有神奇生物的死亡都会附带这个字段，大多数时间还是要`几秒内没人造成伤害`这个逻辑来控制换线，但这里就是问题了。时间设置少时服务器卡会导致意外换线；时间设置多时会导致挤不进下一条线路。

不想了，人多就不刷，太折磨了这个东西。

如果我刷到，我会开心很久。

明日方舟的危机合约抄过去了，没有打明日方舟的激情了，最近脑子里全是星痕共鸣。我要去异世界。
