<section class="widget">
  <div style="text-align: center;">
  <canvas 
    id="composite"
    width="1112"
    height="3392"
    style="width: 100%; height: auto; display: block;">
  </canvas>
</div>

  <script>
    const bodyIds = [1, 10, 11, 12, 13, 15, 17, 18, 19, 2, 20, 21, 23, 3, 4, 5, 7, 9];
    const faceIds = Array.from({ length: 30 }, (_, i) => i + 1);

    const bodyId = bodyIds[Math.floor(Math.random() * bodyIds.length)];
    const faceId = faceIds[Math.floor(Math.random() * faceIds.length)];

    const CDN = "https://cdn.jsdelivr.net/gh/xxfttkx/image-hosting/kokoron";
    const bodyUrl = `${CDN}/stb1_s0_1_${bodyId}.png`;
    const faceUrl = `${CDN}/st1_s0_1_${faceId}.png`;

    function loadImage(src) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => resolve(img);
        img.onerror = reject;
        img.src = src;
      });
    }

    async function composite() {
      const canvas = document.getElementById("composite");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");
      ctx.imageSmoothingEnabled = true;
      ctx.webkitImageSmoothingEnabled = true;
      ctx.mozImageSmoothingEnabled = true;


      try {
        const [bodyImg, faceImg] = await Promise.all([
          loadImage(bodyUrl),
          loadImage(faceUrl),
        ]);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(bodyImg, 0, 0);
        ctx.drawImage(faceImg, 0, 0);

      } catch (e) {
        console.error("加载图像失败:", e);
      }
    }

    composite();
  </script>
</section>
